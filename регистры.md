Да. Короткий, жёсткий **конспект по `tolower / toupper` и компании**.

---

# `tolower / toupper` и функции `<cctype>`

## Для чего они вообще

Функции из `<cctype>` работают **с одним символом**  
Изначально — для **C**, а не для строк.

```cpp
#include <cctype>
```

---

## Основные функции

|Функция|Что проверяет|
|---|---|
|`std::tolower(c)`|переводит в нижний регистр|
|`std::toupper(c)`|переводит в верхний регистр|
|`std::isalpha(c)`|буква|
|`std::isdigit(c)`|цифра|
|`std::isalnum(c)`|буква или цифра|
|`std::isspace(c)`|пробел|
|`std::islower(c)`|нижний регистр|
|`std::isupper(c)`|верхний регистр|
|`std::ispunct(c)`|пунктуация|

---

## Ключевой момент (ОЧЕНЬ ВАЖНО)

### Эти функции принимают **НЕ `char`**

Они принимают:

- `unsigned char`
    
- или `EOF`
    

❌ **Типичная ошибка**

```cpp
char c = 'Я';      // отрицательное значение
std::tolower(c);  // ❌ UB
```

✅ **Правильно**

```cpp
unsigned char uc = static_cast<unsigned char>(c);
std::tolower(uc);
```

---

## Почему так

- `char` может быть **signed**
    
- `c < 0` → обращение в таблицу → **UB**
    
- стандарт C/C++ это прямо запрещает
    

---

## Что реально поддерживается

- **ASCII**
    
- латиница `A–Z`, `a–z`
    
- цифры, пробелы, базовая пунктуация
    

❌ **НЕ Unicode**  
❌ **НЕ UTF-8**  
❌ **НЕ кириллица**

---

## Мини-примеры

### Один символ

```cpp
char c = 'A';
char lower = std::tolower(static_cast<unsigned char>(c));
// 'a'
```

---

### Вся строка (ASCII)

```cpp
std::string s = "HeLLo";

for (char& c : s) {
    c = std::tolower(static_cast<unsigned char>(c));
}
// "hello"
```

---

## Сравнение строк без учёта регистра (ASCII)

```cpp
bool ci_less(const std::string& a, const std::string& b) {
    return std::lexicographical_compare(
        a.begin(), a.end(),
        b.begin(), b.end(),
        [](unsigned char x, unsigned char y) {
            return std::tolower(x) < std::tolower(y);
        });
}
```

---

## Частые ошибки

❌ Использовать с UTF-8 строками  
❌ Забывать `unsigned char`  
❌ Думать, что `tolower` = Unicode  
❌ Использовать для UI

---

## Где МОЖНО использовать

- ASCII
    
- конфиги
    
- протоколы
    
- технические идентификаторы
    
- парсинг
    

---

## Где НЕЛЬЗЯ

- пользовательский ввод
    
- локали
    
- русский язык
    
- UI
    

---

## Альтернативы

|Задача|Инструмент|
|---|---|
|Unicode|ICU|
|Qt|`QString::toLower()`|
|Локаль C++|`std::locale` (ограниченно)|

---

## Ультимативная выжимка

- `tolower / toupper` — **для одного символа**
    
- Работают с **ASCII**
    
- Принимают **unsigned char**
    
- Для строк — вручную в цикле
    
- Для Unicode — **НЕ ПОДХОДЯТ**
    

Если хочешь, дальше логично:  
**таблица “что можно/нельзя делать с UTF-8 в std::string”** или **как безопасно писать case-insensitive compare**.